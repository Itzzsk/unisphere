<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UniSphere</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            poppins: ["Poppins", "sans-serif"],
          },
        },
      },
    };
  </script>

  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <!-- External CSS -->
  <link rel="stylesheet" href="styles.css">

  <!-- Favicon (Optional, Add Your Icon) -->
  <link rel="icon" href="favicon.ico" type="image/x-icon">
</head>

<body>
  <!-- Background Image -->
  <div class="fixed inset-0 -z-50">
    <img id="bgImage" class="w-full h-full object-cover" onerror="this.style.display='none'">
    <div id="bgLoading" class="absolute inset-0 flex justify-center items-center"></div>
  </div>

  <!-- Header -->
  <header class="container">
    <img src="logo2.png" alt="UniSphere Logo" class="logo">
    <div class="menu" onclick="toggleMenu()">
      <div class="bar1"></div>
      <div class="bar2"></div>
      <div class="bar3"></div>
    </div>
    
    <nav id="mobile-menu">
      <ul>
        <li><button id="openAbout">About</button></li>
        <li><button onclick="window.location.href='admin.html'">Admin Login</button></li>
        <li><button onclick="window.location.href='student.html'">Attendance Tracker</button></li>
      </ul>
    </nav>
    
    
  </header>

  <!-- Tabs -->
  <div class="tabs font-poppins Inline text-2xl">
    <button class="tab" data-tab="for-you">For You</button>
    <button class="tab" data-tab="explore">Explore</button>
  </div>

  <!-- About Section -->
  <div id="aboutSection" class="fixed inset-0 bg-white bg-opacity-95 flex flex-col items-center justify-center p-8 hidden z-50">
    <h1 class="text-3xl font-karla mb-4">About UniSphere ðŸš€</h1>
    <p class="text-center text-lg max-w-xl font-nunito">
      Welcome to our official college platform built for students, by students. This is your space to share honest thoughts, anonymous confessions, and connect with the campus community in a real and relatable way. 
      Whether you're here to speak your mind, read what others are thinking, or simply stay updated on campus buzz, this platform is designed to keep things open, engaging, and fun.
    </p>
    <a href="https://www.instagram.com/bca.ahl" target="_blank" class="mt-6 text-pink-600 text-3xl">
      <i class="fab fa-instagram"></i>
    </a>
    <button id="closeAbout" class="mt-6 bg-black text-white px-4 py-2 rounded">Close</button>
  </div>

  <!-- Banner Slider -->
  <div class="slider-wrapper">
    <div class="slider" id="slider">
      <div class="slide"><img src="b1.jpg" alt="Banner 1"></div>
      <div class="slide"><img src="b2.jpg" alt="Banner 2"></div>
    </div>
  </div>

  <!-- For You Section -->
  <div id="for-you" class="content">
                
                <h2 class="text-2xl font-poppins mb-4">Notes and Qps</h2>
            <div class="notes-row">

            <div class="project">
                <a href="https://mega.nz/folder/FKNlnB6D#9hOs96f7AylcLOGVeoh9Fg/folder/0D93WBQa" target="_blank">
                    <img src="1st.jpg" alt="Project Image" class="project-image">
                </a>
            </div>
        
            <div class="project">
                <a href="https://mega.nz/folder/FKNlnB6D#9hOs96f7AylcLOGVeoh9Fg/folder/BK9BSJrD" target="_blank">
                    <img src="2nd.jpg" alt="Project Image" class="project-image">
                </a>
            </div>
            <div class="project">
                <a href="https://mega.nz/folder/FKNlnB6D#9hOs96f7AylcLOGVeoh9Fg/folder/kC1RWBhb" target="_blank">
                    <img src="3rd.jpg" alt="Project Image" class="project-image">
                </a>
            </div>
            </div>
            <div class="notes-row">

            <div class="project">
                <a href="https://mega.nz/folder/FKNlnB6D#9hOs96f7AylcLOGVeoh9Fg/folder/Jf9VCZ7A" target="_blank">
                    <img src="4th.jpg" alt="Project Image" class="project-image">
                </a>
            </div>
            <div class="project">
                <a href="https://mega.nz/folder/FKNlnB6D#9hOs96f7AylcLOGVeoh9Fg/folder/wS8nxDDZ" target="_blank">
                    <img src="5th.jpg" alt="Project Image" class="project-image">
                </a>
            </div>
            <div class="project">
                <a href="https://mega.nz/folder/FKNlnB6D#9hOs96f7AylcLOGVeoh9Fg/folder/Ae1jQTrJ" target="_blank">
                    <img src="6th.jpg" alt="Project Image" class="project-image">
                </a>
            </div>
            </div>
            <div class="max-w-md mx-auto mt-10 p-4 bg-white/80 backdrop-blur-lg rounded-2xl shadow-2xl">
              <!-- Header -->
              <div class="flex justify-between items-center p-4 bg-white rounded-xl shadow-md">
                  <span class="font-Poppins text-lg text-gray-800">UniAI Chat</span>
                  <button onclick="clearChat()" 
                          class="text-sm bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600 transition">
                      Clear
                  </button>
              </div>
          
              <!-- Chatbox -->
              <div id="chatbox" class="p-4 h-80 overflow-y-auto space-y-3 flex-1 text-black">
                  <div class="text-gray-500 text-sm text-center">Start a conversation...</div>
              </div>
          
              <!-- Input Section (Black & White) -->
              <div class="flex flex-wrap items-center border-t border-gray-200 p-3 bg-white rounded-b-xl shadow-md gap-2">
                  <input id="userInput" type="text" placeholder="Ask UniAI anything.... " 
                         class="flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-black w-full sm:w-auto text-black placeholder-gray-600">
                  <button onclick="sendMessage()" 
                          class="bg-black text-white px-4 py-2 rounded-lg hover:bg-gray-900 transition shadow-md">
                      Send
                  </button>
              </div>
          </div>
          
                      
                    </div>
        <script>
          function sendMessage() {
            const userInput = document.getElementById("userInput");
            const userMessage = userInput.value.trim();
            if (!userMessage) return;

            const chatbox = document.getElementById("chatbox");

            // Append user message
            chatbox.innerHTML += `
                <div class="flex justify-end">
                  <div class="bg-black text-white px-4 py-2 rounded-lg max-w-xs">${userMessage}</div>

                </div>
            `;

            userInput.value = ""; // Clear input field
            scrollToBottom(); // Auto-scroll to bottom

            // Show loading message
            const loadingElement = document.createElement("div");
            loadingElement.id = "loading";
            loadingElement.className = "flex justify-start";
            loadingElement.innerHTML = `<div class=" text-gray-700 px-4 py-2 rounded-lg max-w-xs">Thinking...</div>`;
            chatbox.appendChild(loadingElement);
            scrollToBottom(); // Ensure auto-scroll

            // Simulate API response after delay
            setTimeout(async () => {
                // Fetch AI response
                const response = await fetch('/api/chat', { 
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: userMessage })
                });

                const data = await response.json();

                // Remove loading message
                document.getElementById("loading").remove();

                // Append bot response
                chatbox.innerHTML += `
                    <div class="flex justify-start">
                      <div class="text-black px-4 py-2 rounded-lg max-w-xs border text-left">
                        ${data.reply}
                    </div>
                    
                    </div>
                `;

                scrollToBottom(); // Auto-scroll again
            }, 1000);
        }

        function scrollToBottom() {
            const chatbox = document.getElementById("chatbox");
            chatbox.scrollTop = chatbox.scrollHeight;
        }

        function clearChat() {
            document.getElementById("chatbox").innerHTML = `<div class="text-gray-400 text-sm text-center">Chat cleared...</div>`;
        }

        function handleKeyPress(event) {
            if (event.key === "Enter") {
                sendMessage();
            }
        }
          // Modal logic
          const eventCard = document.getElementById('eventCard');
          const imageModal = document.getElementById('imageModal');
          const closeModal = document.getElementById('closeModal');
          
          eventCard.addEventListener('click', () => {
            imageModal.classList.remove('hidden');
          });
          
          closeModal.addEventListener('click', () => {
            imageModal.classList.add('hidden');
          });
          
          // Toggle View More button logic
          const toggleEventsBtn = document.getElementById('toggleEventsBtn');
          const eventsContainer = document.getElementById('eventsContainer');
          let isExpanded = false;
          
          toggleEventsBtn.addEventListener('click', () => {
            if (isExpanded) {
              eventsContainer.style.maxHeight = '500px';
              toggleEventsBtn.textContent = 'View More';
            } else {
              eventsContainer.style.maxHeight = 'none';
              toggleEventsBtn.textContent = 'View Less';
            }
            isExpanded = !isExpanded;
          });
          </script>
          
  
          
<div id="explore" class="content">
   
  <div id="postsContainer" class="w-full max-w-4xl mx-auto"></div>

    
    <div class="fixed bottom-4 right-4">
        <button class="bg-black text-white w-16 h-16 rounded-full shadow-lg flex items-center justify-center" id="createPostButton">
            <i class="fa-solid fa-plus"></i>
        </button>
    </div>

    
    <div class="fixed inset-0 bg-white z-50 hidden" id="createPost">
        <div class="flex items-center justify-between p-4 border-b border-gray-300">
            <i class="fas fa-arrow-left text-2xl cursor-pointer" id="createPostBackButton"></i>
            <h1 class="text-xl font-Quicksand">Create</h1>
            <button class="border border-black px-4 py-2 rounded-lg" id="submitPostButton">Post</button>
        </div>
        <div class="p-4">
            <textarea class="w-full h-32 p-2 border border-gray-300 rounded-lg mb-2" placeholder="Share your thoughts..." id="postContent"></textarea>
            <input type="file" id="imageInput" accept="image/*" class="hidden" />
            <button id="imageUploadButton" class="text-gray-600 p-2 rounded-lg border border-gray-300">
                <i class="fas fa-image mr-2"></i>Add Image
            </button>
            <div id="imagePreview" class="mt-4"></div>
        </div>
    </div>
</div>
      
        <div class="fixed inset-0 -z-50">
            <img id="bgImage" class="w-full h-full object-cover" onerror="this.style.display='none'">
            <div id="bgLoading" class="absolute inset-0 flex justify-center items-center">
            </div>
        </div>
        
        
        <script src="script.js"></script>
  <script>
    function toggleMenu() {
      const menu = document.getElementById("mobile-menu");
      const menuIcon = document.querySelector(".menu");
  
      // Toggle the 'show' class for smooth animations
      menu.classList.toggle("show");
      menuIcon.classList.toggle("active");
  
      // Ensuring smooth transition
      if (menu.classList.contains("show")) {
          menu.style.transform = "translateX(0%)";
      } else {
          menu.style.transform = "translateX(100%)";
      }
  }
  
    
    
    
    // About Section Toggle
    document.getElementById('openAbout').addEventListener('click', () => document.getElementById('aboutSection').classList.remove('hidden'));
    document.getElementById('closeAbout').addEventListener('click', () => document.getElementById('aboutSection').classList.add('hidden'));

    // Background Load
    document.addEventListener("DOMContentLoaded", () => {
      const bgImage = document.getElementById("bgImage");
      bgImage.src = `/api/background?ts=${Date.now()}`;
      bgImage.onload = () => bgLoading.style.display = "none";
    });

    // Banner Slider
    let currentSlide = 0;
    setInterval(() => {
      currentSlide = (currentSlide + 1) % 2;
      document.getElementById('slider').style.transform = `translateX(-${currentSlide * 50}%)`;
    }, 3000);

  
  </script>
</body>
</html>
